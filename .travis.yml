sudo: required
dist: trusty

language: cpp

compiler: gcc

env:
  global:
    secure: "C4tE5UQtoItWxd+sSfj9vULLd0EjY5Ek/BentI/m1xz6tAOi+65RTjMEgz9OQZh1rlsExV4y9YEfV/JzZ3peLNypw3b2BaCum6LECkaEDob2aPR03u/DruTkGkXITUIFFh2hg0iQH2TZP9/0ZtQBRXqNbU+DnH8Rs1Q+kNcWoFU="

addons:
    coverity_scan:
        project:
            name: "rakhimov/scram"
        # description: "Simplified Command-line Risk Analysis Multi-tool"
        notification_email: "ol.rakhimov@gmail.com"
        build_command_prepend: "cmake .."
        build_command: "make -j 2"
        branch_pattern: "coverity-scan"
    apt:
        packages:
            - libboost-program-options-dev
            - libboost-filesystem-dev
            - libboost-system-dev
            - libboost-math-dev
            - libxml2-dev
            - libxml++2.6-dev
            - libgoogle-perftools-dev
            - qt5-default

before_install:
    - echo -n | openssl s_client -connect scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-certificates.crt

before_script:
    - mkdir build
    - cd build

script:
    - ../.no_build.sh

after_failure:
    - cat build-log.txt
